swagger: '2.0'
info:
  description: |
    Description du service "Infra PROD" projet IOTIA
  version: 1.0.0
  title: Web Service Infra PROD 
  contact:
    email: alex.lens@etu.unice.fr
host: webservice.lensalex.fr:3005


paths:
  /InfraProd/ListValueType:
    get:
      tags:
      - InfraProd
      summary: Retourne des informations une liste de capteurs.
      description: Retourne l'id, le libelle d'une liste de capteurs ainsi que son unité de mesure.
      operationId: getInfoCapteurs
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListValueType'
        400:
          description: Requete invalid
  /InfraProd/ListDevice:
    get:
      tags:
      - InfraProd
      summary: Retourne les devices sans arduino et raspberry pi 
      description: Retourne l'id, le type de libelle d'une liste de capteurs
      operationId: getInfoDevices
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListDevice'
        400:
          description: Requete invalid
  /InfraProd/Search/{NomSalle}:
    get:
      tags:
      - InfraProd
      summary: Cherche les capteurs d'une salle
      description: Cherche les capteurs d'une salle via le numéro de salle
      operationId: getCapteursViaNum
      produces:
      - application/json
      parameters:
      - name: NomSalle
        in: path
        description: le numéro de la salle 
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/SearchCapteurs'
        400:
          description: Requete invalid
  /InfraProd/Box/Info:
    get:
      tags:
      - InfraProd
      summary: Retourne les informations de chaque box 
      description: Retourne les informations de chaque box avec l'ip, l'étage, la description ou encore le batiment
      operationId: getInfoBox
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/BoxInfo'
        400:
          description: Requete invalid
  /InfraProd/ListCapteur/{Salle}:
    get:
      tags:
      - InfraProd
      summary: Cherche les capteurs d'une salle
      description: Cherche les capteurs d'une salle via le nom de salle
      operationId: getCapteursViaSalle
      produces:
      - application/json
      parameters:
      - name: Salle
        in: path
        description: le nom de la salle 
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListCapteur_salle'
        400:
          description: Requete invalid
  /InfraProd/ListCapteur:
    get:
      tags:
      - InfraProd
      summary: Retourne liste de capteurs
      description: Retourne une liste de capteurs avec l'id_device, le type de libelle et le libelle
      operationId: getListeCapteurs
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListCapteur'
        400:
          description: Requete invalid
  /InfraProd/ListComplete:
    get:
      tags:
      - InfraProd
      summary: Retourne liste de capteurs pour le site web
      description: Retourne une liste de capteurs avec l'id_device, le type de libelle et l'id de la box
      operationId: getListeCapteursWeb
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListComplete'
        400:
          description: Requete invalid
  /InfraProd/ListSalle:
    get:
      tags:
      - InfraProd
      summary: Retourne une liste des salles pour avoir l'id_box
      description: Retourne une liste des salles avec le nom, l'id de la box et l'id de la salle
      operationId: getListeSalle
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListSalle'
        400:
          description: Requete invalid
  /InfraProd/Valeur/{IdSalle}:
    get:
      tags:
      - InfraProd
      summary: Cherche les valeurs d'une salle
      description: Cherche les valeurs d'une salle via l'id de la salle
      operationId: getValeursIdSalle
      produces:
      - application/json
      parameters:
      - name: IdSalle
        in: path
        description: l'id de la salle 
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ValeurId'
        400:
          description: Requete invalid
  /InfraProd/Valeur/{IdSalle}/{IdValueType}:
    get:
      tags:
      - InfraProd
      summary: Cherche les valeurs d'un capteur grâce à son type
      description: Cherche les valeurs d'un capteur grâce à son type. On y retrouve la valeur, le libelle et le nom.
      operationId: getValeursIdSalle_IdValType
      produces:
      - application/json
      parameters:
      - name: IdSalle
        in: path
        description: l'id de la salle 
        required: true
        type: integer
        format: int64
      - name: IdValueType
        in: path
        description: l'id du type de valeur
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ValeurId'
        400:
          description: Requete invalid
  /InfraProd/ValeurSpecifique/{IdDevice}:
    get:
      tags:
      - InfraProd
      summary: Cherche les valeurs d'un capteur spécifique
      description: Cherche les valeurs d'un capteur spécifique
      operationId: getValeurSpecifique
      produces:
      - application/json
      parameters:
      - name: IdDevice
        in: path
        description: l'id du device
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ValeurSpecifique'
        400:
          description: Requete invalid
  /InfraProd/List/Historique:
    get:
      tags:
      - InfraProd
      summary: Retourne l'historique des valeurs des capteurs
      description: Retourne l'historique des valeurs des capteurs avec le libelle, l'id du device, la valeur, l'unite et le type de libelle
      operationId: getListeHistorique
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListHistorique'
        400:
          description: Requete invalid
  /InfraProd/ValeurSpecifique/Last/{IdDevice}:
    get:
      tags:
      - InfraProd
      summary: Cherche la dernière valeur d'un capteur spécifique
      description: Cherche la dernière valeur d'un capteur spécifique
      operationId: getLastValeurSpecifique
      produces:
      - application/json
      parameters:
      - name: IdDevice
        in: path
        description: l'id du device
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ValeurLastSpecifique'
        400:
          description: Requete invalid
  /InfraProd/ValeurSpecifique/Moyenne/{IdDevice}:
    get:
      tags:
      - InfraProd
      summary: Cherche la moyenne des valeurs d'un capteur spécifique
      description: Cherche la moyenne des valeurs d'un capteur spécifique
      operationId: getMoyValeurSpecifique
      produces:
      - application/json
      parameters:
      - name: IdDevice
        in: path
        description: l'id du device
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ValeurMoySpecifique'
        400:
          description: Requete invalid
  /InfraProd/List/Historique/Temp:
    get:
      tags:
      - InfraProd
      summary: Retourne l'historique des valeurs des capteurs de temp du plus récent au plus vieux 
      description: Retourne l'historique des valeurs des capteurs de temp du plus récent au plus vieux avec le type de libelle, le libelle et la valeur
      operationId: getListeHistoriqueTemp
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListeHistorique'
        400:
          description: Requete invalid
  /InfraProd/List/Historique/CO2:
    get:
      tags:
      - InfraProd
      summary: Retourne l'historique des valeurs des capteurs de CO2 du plus récent au plus vieux 
      description: Retourne l'historique des valeurs des capteurs de CO2 du plus récent au plus vieux avec le type de libelle, le libelle et la valeur
      operationId: getListeHistoriqueCO2
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListeHistorique'
        400:
          description: Requete invalid
  /InfraProd/List/Historique/Energie:
    get:
      tags:
      - InfraProd
      summary: Retourne l'historique des valeurs des capteurs de Energie du plus récent au plus vieux 
      description: Retourne l'historique des valeurs des capteurs de Energie du plus récent au plus vieux avec le type de libelle, le libelle et la valeur
      operationId: getListeHistoriqueEnergie
      produces:
      - application/json
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/ListeHistorique'
        400:
          description: Requete invalid
  /InfraProd/Box/{IdBox}:
    get:
      tags:
      - InfraProd
      summary: Cherche tous les capteurs d'une box
      description: Cherche tous les capteurs d'une box via l'id de la box et retourne l'id et le libelle.
      operationId: getCapteursIdBox
      produces:
      - application/json
      parameters:
      - name: IdBox
        in: path
        description: l'id de la box 
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/Box'
        400:
          description: Requete invalid
  /InfraProd/Box/Actionneur/{IdBox}:
    get:
      tags:
      - InfraProd
      summary: Cherche tous les actionneurs d'une box
      description: Cherche tous les actionneurs d'une box via l'id de la box et retourne l'id et le libelle.
      operationId: getActionneursIdBox
      produces:
      - application/json
      parameters:
      - name: IdBox
        in: path
        description: l'id de la box 
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/Box'
        400:
          description: Requete invalid
  /InfraProd/Box/PanneauSolaire/{IdBox}:
    get:
      tags:
      - InfraProd
      summary: Cherche tous les panneaux solaire d'une box
      description: Cherche tous les actionneurs d'une box via l'id de la box et retourne l'id et le libelle.
      operationId: getPanneauSolaireIdBox
      produces:
      - application/json
      parameters:
      - name: IdBox
        in: path
        description: l'id de la box 
        required: true
        type: integer
        format: int64
      responses:
        200:
          description: successful operation
          schema:
            $ref: '#/definitions/Box'
        400:
          description: Requete invalid
definitions:
  ListValueType:
    type: object
    required:
    - id_valuetype
    - libelle
    properties:
      id_valuetype:
        type: integer
        format: int64
      libelle:
        type: string
        example: Temperature
      unite:
        type: string
        example: °C
  Box:
    type: object
    required:
    - id_device
    properties:
      id_device:
        type: integer
        format: int64
      libelle:
        type: string
        example: Temperature
  ListeHistorique:
    type: object
    required:
    - valeur
    properties:
      libelle_type:
        type: string
      libelle:
        type: string
        example: Temperature
      valeur:
        type: number
        example: 12.0
  ValeurLastSpecifique:
    type: object
    required:
    - valeur
    properties:
      valeur:
        type: integer
        format: int64
      unite:
        type: string
        example: Temperature
      libelle:
        type: string
        example: °C
      libelle_type:
        type: string
        example: type
  ValeurMoySpecifique:
    type: object
    required:
    - valeur
    properties:
      libelle_type:
        type: string
      libelle:
        type: string
        example: Temperature
      valeur:
        type: number
        example: 12.0
  ValeurId:
    type: object
    required:
    - valeur
    - libelle
    properties:
      valeur:
        type: number
        example: 12.0
      libelle:
        type: string
        example: Temperature
      nom:
        type: string
        example: le nom
  ListHistorique:
    type: object
    required:
    - id_device
    properties:
      libelle:
        type: string
        example: Temp
      id_device:
        type: integer
        format: int64
      valeur:
        type: number
        example: 12.0
      unite:
        type: string
        example: °C
      libelle_type:
        type: string
        example: le type
  ValeurSpecifique:
    type: object
    required:
    - id_box
    - id_valuetype
    properties:
      id_box:
        type: integer
        format: int64
      id_valuetype:
        type: integer
        format: int64
      libelle_type:
        type: string
        example: type libelle
  ListSalle:
    type: object
    required:
    - id_box
    - id_salle
    properties:
      nom:
        type: string
        example: C237
      id_box:
        type: integer
        format: int64
      id_salle:
        type: integer
        format: int64
  ListComplete:
    type: object
    required:
    - id_device
    - id_box
    properties:
      id_device:
        type: integer
        format: int64
      libelle:
        type: string
        example: libelle
      id_box:
        type: integer
        format: int64
  ListCapteur_salle:
    type: object
    required:
    - id_device
    - libelle
    properties:
      id_valuetype:
        type: integer
        format: int64
      libelle:
        type: string
        example: Co2
  ListCapteur:
    type: object
    required:
    - id_device
    properties:
      id_device:
        type: integer
        format: int64
      libelle_type:
        type: string
        example: type
      libelle:
        type: string
        example: temp
  BoxInfo:
    type: object
    required:
    - id_salle
    - id_box
    - id_etage
    properties:
      id_salle:
        type: integer
        format: int64
      id_box:
        type: integer
        format: int64
      libelle:
        type: string
        example: un libelle
      adr_ip:
        type: string
        example: 127.0.0.1
      description:
        type: string
        example: une description
      nom:
        type: string
        example: un nom
      id_etage:
        type: integer
        format: int64
      NomSalle:
        type: string
        example: nom de salle
      PanneauSolaire:
        type: integer
        format: int64
      NbBouton:
        type: integer
        format: int64
  ListDevice:
    type: object
    required:
    - id_devicetype
    - libelle_type
    properties:
      id_valuetype:
        type: integer
        format: int64
      libelle_type:
        type: integer
        format: int64
  SearchCapteurs:
    type: object
    required:
    - id_salle
    - id_device
    - id_etage
    properties:
      id_salle:
        type: integer
        format: int64
      nom:
        type: string
        example: IUT
      id_device:
        type: integer
        format: int64    
      libelle:
        type: string
        example: Co2 
      adr_ip:
        type: string
        example: 127.0.0.1
      description:
        type: string
        example: une description
      nomBat:
        type: string
        example: un nom
      id_etage:
        type: integer
        format: int64   
schemes:
 - http
